<p-dialog
header="Histórico de Batalhas"
[(visible)]="mostrarModal"
(onHide)="fecharModal()"
[draggable]="false"
[closeOnEscape]="true"
[blockScroll]="true"
[modal]="true"
[style]="{width:'60vw'}">
    <p-table 
        *ngIf="mostrarModal"
        [lazy]="true"
        (onLazyLoad)="obterProximaPagina($event)"
        [value]="paginaHistoricoBatalha.elementos" 
        [rows]="5" 
        [paginator]="true" 
        [totalRecords]="paginaHistoricoBatalha.totalElementos">

            <ng-template pTemplate="header">
                <tr>
                    <th style="width: 50%; text-align:center">Descrição</th>
                    <th style="width: 25%; text-align:center">Horário</th>
                    <th style="width: 15%; text-align:center">Resultado</th>
                    <th style="width: 10%; text-align:center">Ação</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-batalha>
                <tr>
                    <td class="p-text-center">
                        <b>
                            {{batalha.nomeJogador === dadosJogadorLogado.nickname ?
                            'Você atacou ' + batalha.nomeOponente : 'Você foi atacado por ' + batalha.nomeJogador}}
                        </b>
                    </td>
                    <td class="p-text-center">
                        <span>{{batalha.dataBatalha | qntdTempoAtras}}</span>
                    </td>
                    <td class="p-text-center">
                        <span 
                        *ngIf= "(batalha.jogadorVenceu && batalha.nomeJogador === dadosJogadorLogado.nickname) ||
                        !batalha.jogadorVenceu && batalha.nomeOponente === dadosJogadorLogado.nickname" 
                        class="p-tag p-tag-success texto-badge-resultado texto-venceu">Venceu</span>
                        <span *ngIf= "(!batalha.jogadorVenceu && batalha.nomeJogador === dadosJogadorLogado.nickname) ||
                        (batalha.jogadorVenceu && batalha.nomeOponente === dadosJogadorLogado.nickname)"
                        class="p-tag p-tag-danger texto-badge-resultado texto-perdeu">Perdeu</span>
                    </td>
                    <td class="p-text-center">
                        <p-button type="button" icon="pi pi-info" styleClass="p-button-sm" pTooltip="Ver detalhes da batalha."></p-button>
                    </td>
                </tr>
            </ng-template>
    </p-table>
</p-dialog>
